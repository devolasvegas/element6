!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("React"),require("_"),require("Snap")):"function"==typeof define&&define.amd?define(["React","_","Snap"],e):"object"==typeof exports?exports.SVGPathPlayer=e(require("React"),require("_"),require("Snap")):t.SVGPathPlayer=e(t.React,t._,t.Snap)}(this,function(t,e,n){return function(t){function e(s){if(n[s])return n[s].exports;var a=n[s]={exports:{},id:s,loaded:!1};return t[s].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";t.exports=n(1)},function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),o=function(t,e,n){for(var s=!0;s;){var a=t,r=e,i=n;s=!1,null===a&&(a=Function.prototype);var o=Object.getOwnPropertyDescriptor(a,r);if(void 0!==o){if("value"in o)return o.value;var p=o.get;if(void 0===p)return;return p.call(i)}var l=Object.getPrototypeOf(a);if(null===l)return;t=l,e=r,n=i,s=!0,o=l=void 0}},p=n(2),l=s(p),u=n(3),h=s(u),f=n(4),d=s(f);n(5);var c=n(9),m=s(c),g=n(11),y=s(g),v=function(t){function e(t){a(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={length:0,position:this.props.position,mode:"loading",step:this.props.step,steps:0},this.svg=null,this.snapAnimate=null,this.currentSegment=null,this.snapSegments=[],this.path=null,this.marker=null,this.segmentLengths=[],this.play=this.play.bind(this),this.playSegmentForward=this.playSegmentForward.bind(this),this.playSegmentBackward=this.playSegmentBackward.bind(this),this.pause=this.pause.bind(this),this.loadFile=this.loadFile.bind(this)}return r(e,t),i(e,null,[{key:"propTypes",value:{controls:l["default"].PropTypes.bool,decimalPlaces:l["default"].PropTypes.number,loading:l["default"].PropTypes.bool,marker:l["default"].PropTypes.string,path:l["default"].PropTypes.string,position:l["default"].PropTypes.number,repeat:l["default"].PropTypes.bool,scale:l["default"].PropTypes.number,segments:l["default"].PropTypes.string,startplaying:l["default"].PropTypes.bool,step:l["default"].PropTypes.number,svg:l["default"].PropTypes.string.isRequired,time:l["default"].PropTypes.number,units:l["default"].PropTypes.string},enumerable:!0},{key:"defaultProps",value:{controls:!0,decimalPlaces:1,loading:!0,marker:"",path:void 0,position:0,repeat:!1,scale:1,segments:void 0,step:-1,startplaying:!1,svg:"",time:2e3,units:""},enumerable:!0}]),i(e,[{key:"play",value:function(){var t=this,e=this.state.position;e>=this.state.length&&(e=0);var n=this.state.length-e,s=this.props.time*n/this.state.length;this._segmentToPath(),this.setState({mode:"playing"}),this.path.attr({"stroke-dasharray":this.state.length+" "+this.state.length}),this.path.attr({display:"block"}),this.snapAnimate=d["default"].animate(n,0,function(e){var n=t.state.length-e;t.path.attr({"stroke-dashoffset":e}),t.marker&&t._positionMarker(t.path,n,t.state.length),t.setState({position:n,step:t._segmentFromPosition(n)})},s,mina.linear,function(){t.setState({mode:"path",position:0}),t.props.repeat&&setTimeout(function(){return t.play()},1)})}},{key:"playSegmentForward",value:function(){var t=void 0;this.pause(),t=-1===this.state.step||this.state.step+1>this.state.steps-1?0:this.state.step+1,this._transitionSegment(t)}},{key:"playSegmentBackward",value:function(){var t=void 0;this.pause(),t=this.state.step<=0?this.state.steps-1:this.state.step-1,this._transitionSegment(t)}},{key:"loadFile",value:function(t){var e=0,n="path";this.svg=(0,d["default"])(this.svgImage),this.svg.append(t),this.props.path&&(this._selectPath(this.props.path,!0),e=this.path&&this.path.getTotalLength()||0),this.props.segments&&(this.snapSegments=this.svg.selectAll(this.props.segments+" path"),this.segmentLengths=this._calculateSegmentLengths(),this.segmentLengths.length>0&&!e&&(e=this._segmentPosition(this.snapSegments.length-1))),this.props.marker&&(this.marker=this.svg.select(this.props.marker),this.marker&&this.marker.attr({marker:"",markerStart:"",markerEnd:""}),this.props.path&&this.path&&this.path.attr({marker:"",markerStart:"",markerEnd:""}),this.props.segments&&this.snapSegments.attr({marker:"",markerStart:"",markerEnd:""}),this._positionMarker(this.path,0)),this.setState({mode:n,steps:this.snapSegments.length,length:e}),this._hideSegments(),this.props.startplaying&&this.play()}},{key:"componentDidMount",value:function(){d["default"].load(this.props.svg,this.loadFile)}},{key:"componentWillUnmount",value:function(){this.svg.remove()}},{key:"render",value:function(){var t=this,e="loading"===this.state.mode,n="";if(this.props.controls){var s={length:this.state.length,mode:this.state.mode,position:this.state.position,scale:this.props.scale,step:this.state.step,units:this.props.units};this.props.path&&(s.pause=this.pause,s.play=this.play),this.props.segments&&(s.backward=this.playSegmentBackward,s.forward=this.playSegmentForward),n=l["default"].createElement(m["default"],s)}return l["default"].createElement("div",{className:"svg-path-player"},l["default"].createElement(y["default"],{loading:this.props.loading&&e}),l["default"].createElement("div",{className:"svg-container svg-container-box",ref:function(e){return t.svgImage=e}}),n)}},{key:"pause",value:function(){this.setState({mode:"path"}),this.snapAnimate&&this.snapAnimate.stop()}},{key:"_positionMarker",value:function(t,e,n){if(this.marker){var s=d["default"].path.getPointAtLength(t,e),a=s;if(n&&1>n-e)for(;90===s.alpha;)e-=1,s=d["default"].path.getPointAtLength(t,e);this.marker.transform("translate("+a.x+","+a.y+") rotate("+(s.alpha-90)+")")}}},{key:"_selectPath",value:function(t,e){var n=this.svg.select(t);n&&n.attr({display:""}),this.path=this.svg.select(t+" path"),e||this._hidePath()}},{key:"_hidePath",value:function(){this.path&&this.path.attr({display:"none"})}},{key:"_transitionSegment",value:function(t){var e=void 0;this._pathToSegment(),this.setState({mode:"playing"}),this._hideCurrentSegment(),this._showSegment(t),e=this._segmentPosition(t),this._positionMarker(this.currentSegment,e,e),this.setState({step:t,position:this._segmentPosition(t),mode:"segment"})}},{key:"_segmentFromPosition",value:function(t){var e=h["default"].findLastIndex(this.segmentLengths,function(e){return t>=e});return e=0>e?0:e+1}},{key:"_pathToSegment",value:function(){"playing"===this.mode&&this.pause(),this.setState({mode:"segment"}),this._hidePath()}},{key:"_segmentToPath",value:function(){this.setState({mode:"path"}),this._hideSegments()}},{key:"_hideSegments",value:function(){h["default"].each(this.snapSegments,function(t){t.attr({display:"none"})})}},{key:"_hideCurrentSegment",value:function(){this.currentSegment&&this.currentSegment.attr({display:"none"})}},{key:"_showSegment",value:function(t){this.currentSegment=this.snapSegments[t],this.currentSegment.attr({display:"block"})}},{key:"_calculateSegmentLengths",value:function(){return h["default"].reduce(this.snapSegments,function(t,e){return h["default"].last(t)?t.push(h["default"].last(t)+e.getTotalLength()):t.push(e.getTotalLength()),t},[])}},{key:"_segmentPosition",value:function(t){return this.segmentLengths[t]}}]),e}(l["default"].Component);e["default"]=v,t.exports=e["default"]},function(t,e){t.exports=React},function(t,e){t.exports=_},function(t,e){t.exports=Snap},function(t,e,n){var s=n(6);"string"==typeof s&&(s=[[t.id,s,""]]);n(8)(s,{});s.locals&&(t.exports=s.locals)},function(t,e,n){e=t.exports=n(7)(),e.push([t.id,".glyphicon-spin{-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.svg-path-player{border:1px solid #d3d3d3;position:relative}.svg-path-player .buttons{border-top:1px solid #d3d3d3;padding:2px;overflow:hidden}.svg-path-player .buttons .btn{margin-right:2px}.svg-path-player .buttons .btn .glyphicon{top:1px}.svg-path-player .buttons .status{float:right}.svg-path-player .buttons .status:after{clear:both}.svg-path-player .buttons .distance,.svg-path-player .buttons .steps{height:2em;padding-top:6px;padding-right:4px}.svg-path-player .buttons .steps{margin-right:10px}.svg-path-player .buttons .inactive{color:#d3d3d3}.svg-path-player .loading{position:absolute;top:45%;left:47%;color:#d3d3d3;font-size:1.5em}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var s={},a=0;a<this.length;a++){var r=this[a][0];"number"==typeof r&&(s[r]=!0)}for(a=0;a<e.length;a++){var i=e[a];"number"==typeof i[0]&&s[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(t,e,n){function s(t,e){for(var n=0;n<t.length;n++){var s=t[n],a=d[s.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](s.parts[r]);for(;r<s.parts.length;r++)a.parts.push(l(s.parts[r],e))}else{for(var i=[],r=0;r<s.parts.length;r++)i.push(l(s.parts[r],e));d[s.id]={id:s.id,refs:1,parts:i}}}}function a(t){for(var e=[],n={},s=0;s<t.length;s++){var a=t[s],r=a[0],i=a[1],o=a[2],p=a[3],l={css:i,media:o,sourceMap:p};n[r]?n[r].parts.push(l):e.push(n[r]={id:r,parts:[l]})}return e}function r(t,e){var n=g(),s=b[b.length-1];if("top"===t.insertAt)s?s.nextSibling?n.insertBefore(e,s.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),b.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function i(t){t.parentNode.removeChild(t);var e=b.indexOf(t);e>=0&&b.splice(e,1)}function o(t){var e=document.createElement("style");return e.type="text/css",r(t,e),e}function p(t){var e=document.createElement("link");return e.rel="stylesheet",r(t,e),e}function l(t,e){var n,s,a;if(e.singleton){var r=v++;n=y||(y=o(e)),s=u.bind(null,n,r,!1),a=u.bind(null,n,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=p(e),s=f.bind(null,n),a=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(e),s=h.bind(null,n),a=function(){i(n)});return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else a()}}function u(t,e,n,s){var a=n?"":s.css;if(t.styleSheet)t.styleSheet.cssText=k(e,a);else{var r=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(r,i[e]):t.appendChild(r)}}function h(t,e){var n=e.css,s=e.media;e.sourceMap;if(s&&t.setAttribute("media",s),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e){var n=e.css,s=(e.media,e.sourceMap);s&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var a=new Blob([n],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(a),r&&URL.revokeObjectURL(r)}var d={},c=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},m=c(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=c(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,v=0,b=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=m()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=a(t);return s(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var o=n[i],p=d[o.id];p.refs--,r.push(p)}if(t){var l=a(t);s(l,e)}for(var i=0;i<r.length;i++){var p=r[i];if(0===p.refs){for(var u=0;u<p.parts.length;u++)p.parts[u]();delete d[p.id]}}}};var k=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),o=function(t,e,n){for(var s=!0;s;){var a=t,r=e,i=n;s=!1,null===a&&(a=Function.prototype);var o=Object.getOwnPropertyDescriptor(a,r);if(void 0!==o){if("value"in o)return o.value;var p=o.get;if(void 0===p)return;return p.call(i)}var l=Object.getPrototypeOf(a);if(null===l)return;t=l,e=r,n=i,s=!0,o=l=void 0}},p=n(2),l=s(p),u=n(10),h=s(u),f=function(t){function e(){a(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),i(e,[{key:"_displayDistance",value:function(t){return(t*this.props.scale).toFixed(this.props.decimalPlaces)}},{key:"_displayStep",value:function(t){return 0>t?0:t+1}},{key:"render",value:function(){var t=void 0,e=void 0,n=void 0,s="loading"===this.props.mode,a=(0,h["default"])(["steps"],{inactive:"path"===this.props.mode||"playing"===this.props.mode||s}),r=(0,h["default"])(["distance"],{inactive:s});if(this.props.play||this.props.pause){var i="playing"===this.props.mode,o={display:i?"none":"inline"},p={display:i?"inline":"none"};e=l["default"].createElement("span",null,l["default"].createElement("button",{"aria-pressed":"false",autoComplete:"off",className:"btn btn-success play",disabled:s,onClick:this.props.play,style:o,type:"button"},l["default"].createElement("span",{"aria-hidden":"true",className:"glyphicon glyphicon-play"})),l["default"].createElement("button",{"aria-pressed":"false",autoComplete:"off",className:"btn pause",disabled:s,onClick:this.props.pause,style:p,type:"button"},l["default"].createElement("span",{"aria-hidden":"true",className:"glyphicon glyphicon-pause"})))}(this.props.backward||this.props.forward)&&(n=l["default"].createElement("span",null,l["default"].createElement("button",{"aria-pressed":"false",autoComplete:"off",className:"btn step-backward",disabled:s,onClick:this.props.backward,type:"button"},l["default"].createElement("span",{"aria-hidden":"true",className:"glyphicon glyphicon-step-backward"})),l["default"].createElement("button",{"aria-pressed":"false",autoComplete:"off",className:"btn step-forward",disabled:s,onClick:this.props.forward,type:"button"},l["default"].createElement("span",{"aria-hidden":"true",className:"glyphicon glyphicon-step-forward"}))),t=l["default"].createElement("label",{className:a},this._displayStep(this.props.step)," - ",this._displayStep(this.props.step+1)));var u=l["default"].createElement("span",null,e,n),f=l["default"].createElement("label",{className:r},this._displayDistance(this.props.position)," : ",this._displayDistance(this.props.length)," ",this.props.units);return l["default"].createElement("div",{className:"buttons"},u,l["default"].createElement("div",{className:"status"},t,f))}}],[{key:"propTypes",value:{backward:l["default"].PropTypes.any,decimalPlaces:l["default"].PropTypes.number,forward:l["default"].PropTypes.any,length:l["default"].PropTypes.number,mode:l["default"].PropTypes.string,pause:l["default"].PropTypes.any,play:l["default"].PropTypes.any,position:l["default"].PropTypes.number,scale:l["default"].PropTypes.number,step:l["default"].PropTypes.number,units:l["default"].PropTypes.string},enumerable:!0},{key:"defaultProps",value:{decimalPlaces:1,mode:"loading",position:0,scale:1,step:0,units:""},enumerable:!0}]),e}(l["default"].Component);e["default"]=f,t.exports=e["default"]},function(t,e,n){var s,a;/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var t="",e=0;e<arguments.length;e++){var s=arguments[e];if(s){var a=typeof s;if("string"===a||"number"===a)t+=" "+s;else if(Array.isArray(s))t+=" "+n.apply(null,s);else if("object"===a)for(var i in s)r.call(s,i)&&s[i]&&(t+=" "+i)}}return t.substr(1)}var r={}.hasOwnProperty;"undefined"!=typeof t&&t.exports?t.exports=n:(s=[],a=function(){return n}.apply(e,s),!(void 0!==a&&(t.exports=a)))}()},function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function a(t){var e=t.loading,n=e||void 0===e?{}:{display:"none"};return i["default"].createElement("div",{className:"loading glyphicon glyphicon-refresh glyphicon-spin",style:n})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a;var r=n(2),i=s(r);t.exports=e["default"]}])});
//# sourceMappingURL=react-svgpathplayer.min.js.map